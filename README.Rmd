---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# clptheory

<!-- badges: start -->
<!-- badges: end -->

The goal of clptheory (_classical price theory_) is to create a suite of functions to implement the classical theory of prices. The functions in this package computes the uniform rate of profit, the vector of price of production and the vector of labor values for different specifications of the circulating capital model and the capital stock model. The functions also computes various regression- and non-regression-based measures of deviation between the vector of _all possible_ relative prices of production and the vector of _all possible_ relative labor values.

## Installation

You can install the development version of clptheory from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("dbasu-umass/clptheory")
```

## Examples
These are examples of a 3-industry economy which shows you how to: 
- compute the uniform rate of profit and the vectors of labor values and prices of production for a basic circulating capital model using the Standard Interpretation; and
- compute regression- and non-regression-based measures of deviation between the vector of _all possible_ relative prices of production and the vector of _all possible_ relative labor values.

This example was presented on pages 46-57 of E. M. Ochoa's dissertation (Ochoa, E. M. 1984. Labor-Value and Prices of Production: An Interindustry Study of the U.S. Economy, 1947â€“1972. PhD thesis, _New School for Social Research_, New York, NY.). This example has also been discussed in Appendix B of Basu and Moraitis, 2023. (Basu, Deepankar and Moraitis, Athanasios, "Alternative Approaches to Labor Values and Prices of Production: Theory and Evidence" (2023). Economics Department Working Paper Series. 347. _UMass Amherst_. URL: https://scholarworks.umass.edu/econ_workingpaper/347/)

### The Data
Let us load the library and create the data for our examples.
```{r data}
# Load library
library(clptheory)

# Input-output matrix
A <- matrix(
  data = c(0.265,0.968,0.00681,0.0121,0.391,0.0169,0.0408,0.808,0.165),
  nrow=3, ncol=3, byrow = TRUE
)

# Depreciation matrix
D <- matrix(
  data = c(0,0,0,0.00568,0.0267,0.0028,0.00265,0.0147,0.00246),
  nrow=3, ncol=3, byrow = TRUE
)

# Direct labor input vector
l <- matrix(
  data = c(0.193, 3.562, 0.616),
  nrow=1
)

# Real wage bundle vector
b <- matrix(
  data = c(0.0109, 0.0275, 0.296),
  ncol=1
)

# Gross output vector
Q <- matrix(
  data = c(26530, 18168, 73840),
  ncol=1
)

# Market prices vector
m <- matrix(
  data = c(4, 60, 7),
  nrow=1
)

# Capital stock coefficient matrix
K <- matrix(
  data = c(0,0,0,0.120,0.791,0.096,0.037,0.251,0.043),
  nrow=3, ncol=3, byrow = TRUE
)

# Diagonal matrix of turnover times
t <- diag(c(0.317, 0.099, 0.187))

# Uniform nominal wage rate
wavg <- m%*%b

# Vector of nominal wage rates
w <- matrix(
  data = rep(wavg,3),
  nrow = 1
)

# Value of labor power
v <- 2/3

```


### Standard Interpretation
We will first implement the classical theory of prices for the circulating capital model and then turn to the capital stock model.

#### Circulating Capital Model
```{r examplesi}

# Estimate circulating capital model with SI
si1 <- ppstdint1(
  A = A,
  l = l,
  b = b,
  Q = Q,
  l_simple = l
)

```
What is the uniform rate of profit?
```{r}
si1$urop
```
What is the vector of labor values?
```{r}
si1$lvalues
```
What is the vector of prices of production (absolute)?
```{r}
si1$ppabs
```
Let us now compute the various non-regression-based measures of deviation between the vector of all possible relative labor values and the vector of all possible relative prices of production.
```{r}
nrsi1 <- nregtestrel(
  x = si1$ppabs,
  y = si1$lvalues,
  w = w,
  w_avg = wavg[1,1],
  mev = si1$mevg,
  Q = Q
)
(nrsi1)
```
Let us now compute the various non-regression-based measures of deviation between the vector of all possible relative labor values and the vector of all possible relative prices of production.
```{r}
rsi1 <- regtestrel(x=si1$ppabs,y=si1$lvalues)
(rsi1)
```

#### Capital Stock Model
```{r}
# Estimate model
si2 <- ppstdint3(
  A = A,
  l = l,
  b = b,
  Q = Q,
  D = D,
  K = K,
  t = t,
  l_simple = l
)
```
What is the uniform rate of profti?
```{r}
si2$urop
```
What is the vector of labor values?
```{r}
si2$lvalues
```
What is the vector of prices of production?
```{r}
si2$ppabs
```
Let us now compute the non-regression-based measures of deviation.
```{r}
nrsi2 <- nregtestrel(
  x = si2$ppabs,
  y = si2$lvalues,
  w = w,
  w_avg = wavg[1,1],
  mev = si2$mevg,
  Q = Q
)
(nrsi2)
```
Finally, let us conduct regression-based tests for deviation.
```{r}
rsi2 <- regtestrel(x=si2$ppabs,y=si2$lvalues)
(rsi2)
```


### New Interpretation
We continue working with the 3-industry example and implement the New Interpretation of Marx's labor theory of value. 

#### Circulating Capital Model
```{r exampleni}

# Estimate circulating capital model with NI
ni1 <- ppnewint1(
  A = A,
  l = l,
  w = wavg[1,1],
  v = v,
  Q = Q,
  l_simple = l
)

```
What is the uniform rate of profit?
```{r}
ni1$urop
```
What is the vector of labor values?
```{r}
ni1$lvalues
```
What is the vector of prices of production (absolute)?
```{r}
ni1$ppabs
```
Let us now compute the various non-regression-based measures of deviation between the vector of all possible relative labor values and the vector of all possible relative prices of production.
```{r}
nrni1 <- nregtestrel(
  x=ni1$ppabs,
  y=ni1$lvalues,
  w=w,
  w_avg=wavg[1,1],
  mev=ni1$mevg,
  Q=Q
  )
(nrni1)
```
Let us now compute the various regression-based measures of deviation between the vector of all possible relative labor values and the vector of all possible relative prices of production.
```{r}
rni1 <- regtestrel(x=ni1$ppabs,y=ni1$lvalues)
(rni1)
```

#### Capital Stock Model
```{r}
ni2 <- ppnewint5(
  A = A,
  l = l,
  v = v,
  w = wavg[1,1],
  Q = Q,
  D = D,
  K = K,
  t = t,
  l_simple = l
)
```
What is the uniform rate of profit?
```{r}
ni2$urop
```
What is the vector of labor values?
```{r}
ni2$lvalues
```
What is the vector of prices of production (absolute)?
```{r}
ni2$ppabs
```
Let us now compute the various non-regression-based measures of deviation between the vector of all possible relative labor values and the vector of all possible relative prices of production.
```{r}
nrni2 <- nregtestrel(
  x=ni2$ppabs,
  y=ni2$lvalues,
  w=w,
  w_avg=wavg[1,1],
  mev=ni2$mevg,
  Q=Q
  )
(nrni2)
```
Let us now compute the various regression-based measures of deviation between the vector of all possible relative labor values and the vector of all possible relative prices of production.
```{r}
rni2 <- regtestrel(x=ni2$ppabs,y=ni2$lvalues)
(rni1)
```


## Comparison of SI and NI
We can compare the results for the analysis of the _circulating capital model_ from the SI approach and the NI approach for the non-regression-based measures of deviation between relative prices of production and relative values.
```{r}
comp1 <- cbind(nrsi1,nrni1)
colnames(comp1) <- c("SI","NI")
(comp1)
```

We can compare the results for the analysis of the _capital stock model_ from the SI approach and the NI approach for the non-regression-based measures of deviation between relative prices of production and relative values.
```{r}
comp2 <- cbind(nrsi2,nrni2)
colnames(comp2) <- c("SI","NI")
(comp2)
```

